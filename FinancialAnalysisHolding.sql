--создаем бд FinancialAnalysisHolding
USE master;
GO

DROP DATABASE IF EXISTS FinancialAnalysisHolding;
GO

CREATE DATABASE FinancialAnalysisHolding;
GO

USE FinancialAnalysisHolding;
GO

--сначала создаем таблицу "Курс валют"
CREATE TABLE [Exchange_Rate] (
	Unit_Of_Measurement nvarchar(50) NOT NULL,
	Dollar decimal NOT NULL,
	Euro decimal NOT NULL,
	BYN decimal NOT NULL,
  CONSTRAINT [PK_EXCHANGE_RATE] PRIMARY KEY CLUSTERED
  (
  [Unit_Of_Measurement] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO

--создаем таблицу "Показатели"
CREATE TABLE [Indicators] (
	Indicator_Code int NOT NULL,
	Unit_Of_Measurement nvarchar(50) NOT NULL
	CONSTRAINT [Indicators_fk0] FOREIGN KEY ([Unit_Of_Measurement]) REFERENCES [Exchange_Rate]([Unit_Of_Measurement]),
	Indicator_Name nvarchar(100) NOT NULL,
	Importance int NOT NULL,
  CONSTRAINT [PK_INDICATORS] PRIMARY KEY CLUSTERED
  (
  [Indicator_Code] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO

--создаем таблицу "Предприятия"
CREATE TABLE [Companies] (
	Company_Code int NOT NULL,
	Company_Name nvarchar(150) NOT NULL,
	Bank_Requisites nvarchar(150) NOT NULL,
	Telephone int NOT NULL,
	Contact_Person nvarchar(150) NOT NULL,
  CONSTRAINT [PK_COMPANIES] PRIMARY KEY CLUSTERED
  (
  [Company_Code] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO

--создаем таблицу "Динамика показателей"
CREATE TABLE [Dynamics_Of_Indicators] (
	Indicator_Code int NOT NULL 
	CONSTRAINT [Dynamics_Of_Indicators_fk0] FOREIGN KEY ([Indicator_Code]) REFERENCES [Indicators]([Indicator_Code]),
	Company_Code int NOT NULL
	CONSTRAINT [Dynamics_Of_Indicators_fk1] FOREIGN KEY ([Company_Code]) REFERENCES [Companies]([Company_Code]),
	Date date NOT NULL,
	Value decimal NOT NULL
)
GO

--заполняем таблицу "Курс валют"
INSERT INTO Exchange_Rate(Unit_Of_Measurement, Dollar, Euro, BYN)
VALUES
('Доллар', 1, 0.9384, 2.8345), 
('Евро', 1.0657, 1, 3.0207),
('Белорусский рубль', 0.3528, 0.331, 1)
GO
SELECT * FROM Exchange_Rate
GO


--заполняем таблицу "Показатели"
INSERT INTO Indicators(Indicator_Code, Indicator_Name, Importance, Unit_Of_Measurement)
VALUES
(123457, 'Выручка', 8, 'Доллар'), 
(213455, 'Себестоимость продаж', 10, 'Евро'),
(213457, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(123456, 'Производительность труда', 10, 'Доллар'), 
(213456, 'Прибыль от продаж', 8, 'Евро'),
(903456, 'Текущий налог', 7, 'Белорусский рубль'),
(123455, 'Выручка', 8, 'Доллар'), 
(213454, 'Себестоимость продаж', 10, 'Евро'),
(213453, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(123452, 'Производительность труда', 10, 'Доллар'), 
(213451, 'Прибыль от продаж', 8, 'Евро'),
(213450, 'Текущий налог', 7, 'Белорусский рубль'),
(123458, 'Выручка', 8, 'Доллар'), 
(213466, 'Себестоимость продаж', 10, 'Евро'),
(213477, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(123488, 'Производительность труда', 8, 'Доллар'), 
(993455, 'Прибыль от продаж', 10, 'Евро'),
(223457, 'Текущий налог', 6, 'Белорусский рубль'),
(763457, 'Выручка', 8, 'Доллар'), 
(343455, 'Себестоимость продаж', 10, 'Евро'),
(215557, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(127757, 'Производительность труда', 8, 'Доллар'), 
(219955, 'Прибыль от продаж', 10, 'Евро'),
(219988, 'Текущий налог', 6, 'Белорусский рубль'),
(999999, 'Выручка', 8, 'Доллар'), 
(222445, 'Себестоимость продаж', 10, 'Евро'),
(898989, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(900000, 'Производительность труда', 10, 'Доллар'), 
(113415, 'Прибыль от продаж', 8, 'Евро'),
(210450, 'Текущий налог', 7, 'Белорусский рубль'),
(103419, 'Выручка', 8, 'Доллар'), 
(991455, 'Себестоимость продаж', 10, 'Евро'),
(128456, 'Расходы на оплату труда', 6, 'Белорусский рубль'),
(120000, 'Производительность труда', 10, 'Доллар'), 
(700050, 'Прибыль от продаж', 8, 'Евро'),
(777777, 'Текущий налог', 7, 'Белорусский рубль')
GO
SELECT * FROM Indicators
GO

--заполняем таблицу "Предприятия"
INSERT INTO Companies(Company_Code, Company_Name, Bank_Requisites, Telephone, Contact_Person)
VALUES
(95699, 'МАЗ', 40817810099910004312, 2345678, 'Тиманюк Татьяна Геннадьевна'),
(99998, 'БелДжи', 52817160067810004312, 4326578, 'Юркина Татьяна Ивановна'),
(99997, 'БелАз', 23098110099910003333, 3333333, 'Богданова Виктория Лукинична'),
(99996, 'Белшина', 33161560099910004312, 5678432, 'Мурог Тарас Андреевич'),
(88883, 'БелДжи', 23098110099910005555, 9991234, 'Свидерский Геннадий Брониславович'),
(12396, 'МТЗ', 33161560665810004312, 5678432, 'Зимина Алия Матвеевна'),
(56789, 'МАЗ', 40817810011110004312, 2345677, 'Полякова Мария Львовна'),
(67890, 'БАТЭ', 52817160056810004312, 4326571, 'Дубов Павел Богданович'),
(98753, 'БелАз', 23098110088810003333, 3333343, 'Ефимова Ева Филипповна'),
(45631, 'МТЗ', 33161560099910874312, 5678435, 'Плотников Виктор Дмитриевич'),
(46833, 'БелДжи', 23098110099660005555, 9991232, 'Гусев Иван Игоревич'),
(57338, 'Белшина', 33161560666910044310, 5671432, 'Левин Илья Никитич'),
(74284, 'МАЗ', 40817810099910004390, 2341678, 'Смирнов Егор Никитич'),
(68490, 'БелДжи', 52817160067810089312, 1326578, 'Алешина София Матвеевна'),
(92145, 'БелАз', 23098110099910000033, 3633333, 'Сергеев Артём Лукич'),
(53853, 'МТЗ', 33161560099910004399, 5679432, 'Ковалев Фёдор Витальевич'),
(47348, 'БелДжи', 23098110099910021555, 8991234, 'Сергеева Анна Ильинична'),
(53472, 'МТЗ', 33161560666910004378, 5671432, 'Соколова Полина Алексеевна'),
(64372, 'МАЗ', 40817810099910004378, 2346678, 'Агафонов Иван Сергеевич'),
(34792, 'Белшина', 52817160067810056312, 4326578, 'Колесникова Диана Алексеевна'),
(46372, 'БелАз', 23098110099910004533, 3333383, 'Фетисова Анна Артёмовна'),
(75933, 'МТЗ', 33161560099910004311, 5678232, 'Дроздов Руслан Александрович'),
(23712, 'БАТЭ', 23098110099910001555, 9191234, 'Архипова Мария Макаровна'),
(57832, 'БАТЭ', 33161560666910004311, 5678752, 'Фролова Мария Максимовна'),
(17141, 'БелДжи', 11111110099910021555, 1111234, 'Жуков Максим Даниилович'),
(23222, 'МТЗ', 33333360666910004378, 5671999, 'Сизов Михаил Борисович'),
(94337, 'БАТЭ', 40817777799910004378, 2222228, 'Никольский Роман Глебович'),
(78786, 'БелДжи', 52817166667810056312, 7777578, 'Логинова Ясмина Степановна'),
(98459, 'Белшина', 23098110099918884533, 4500083, 'Быков Дмитрий Борисович'),
(31931, 'Белшина', 33161560099910007777, 5633233, 'ДАлексеев Эмир Юрьевич'),
(65453, 'Белшина', 23098222299910001555, 9991234, 'Дементьева Варвара Николаевна')

GO
SELECT * FROM Companies
GO

--заполняем таблицу "Динамика показателей"
INSERT INTO Dynamics_Of_Indicators(Indicator_Code, Company_Code, Date, Value)
VALUES
(123457, 95699, '2021-07-25', 1.11), 
(213455, 99998, '2022-05-11', -1.12),
(213457, 99997, '2023-04-12', 2.13),
(123456, 99996, '2020-03-13', -6), 
(213456, 88883, '2020-02-14', 9),
(903456, 12396, '2020-01-15', 3.45),
(123455, 56789, '2021-12-16', 8.9), 
(213454, 67890, '2021-11-17', 2.15),
(213453, 98753, '2021-07-18', 7.88),
(123452, 45631, '2021-07-19', 4.5), 
(213451, 46833, '2023-06-26', 8.88),
(213450, 57338, '2022-06-27', 5),
(123458, 74284, '2022-12-28', 4), 
(213466, 68490, '2022-12-01', -6),
(213477, 92145, '2022-10-02', -2),
(123488, 53853, '2021-09-03', -10), 
(993455, 47348, '2021-09-04', 7),
(223457, 53472, '2021-01-05', 9),
(763457, 64372, '2020-02-06', 2.66), 
(343455, 34792, '2023-03-07', -9.99),
(215557, 46372, '2023-04-12', 2.1),
(127757, 75933, '2021-05-12', -3.66), 
(219955, 23712, '2023-06-13', -8.09),
(219988, 57832, '2022-07-14', 0.5),
(999999, 17141, '2023-08-18', 7), 
(222445, 23222, '2022-09-19', 16.16),
(898989, 94337, '2021-10-21', 1),
(900000, 78786, '2022-11-23', 1), 
(113415, 98459, '2022-12-22', 3),
(210450, 31931, '2022-02-23', -2),
(103419, 65453, '2023-02-17', 14)

GO
SELECT * FROM Dynamics_Of_Indicators
GO